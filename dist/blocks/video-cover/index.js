(()=>{"use strict";var e,o={3564:()=>{const e=window.wp.blocks,o=window.wp.element,l=window.wp.i18n,t=window.wp.blockEditor,a=window.wp.components,r=window.wp.primitives,n=(0,o.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(r.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"})),c=e=>{if(!e)return null;let o=e.match(/(?:\?v=|\/embed\/|\.be\/)([a-zA-Z0-9_-]+)/);return o?o[1]:null},s=e=>{const o=c(e);return o?`https://img.youtube.com/vi/${o}/maxresdefault.jpg`:null},i=(e,o)=>{if("youtube"===o){const o=c(e);return o?`https://www.youtube.com/embed/${o}?autoplay=1&mute=1&loop=1&playlist=${o}&controls=0&showinfo=0&rel=0&enablejsapi=1`:e}if("vimeo"===o){const o=(e=>{if(!e)return null;let o=e.match(/vimeo\.com\/(?:video\/)?([0-9]+)/);return o?o[1]:null})(e);return o?`https://player.vimeo.com/video/${o}?background=1&autoplay=1&loop=1&byline=0&title=0&muted=1&controls=0&transparent=0&api=1&volume=0`:e}return e},d=window.wp.data,u=["core/paragraph","core/heading","core/buttons","core/button","core/columns","core/column"],m=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"wpzoom/video-cover","version":"0.1.0","title":"Video Cover","category":"wpzoom-blocks","icon":"cover-image","description":"Add a video background with support for YouTube and Vimeo.","supports":{"html":false,"spacing":{"padding":true,"margin":true}},"attributes":{"url":{"type":"string"},"videoProvider":{"type":"string"},"localVideoUrl":{"type":"string"},"localVideoType":{"type":"string"},"backgroundImageId":{"type":"number"},"backgroundImageUrl":{"type":"string"},"backgroundImageAlt":{"type":"string"},"backgroundSize":{"type":"string","default":"cover"},"dimRatio":{"type":"number","default":50},"overlayColor":{"type":"string"},"customOverlayColor":{"type":"string"},"showPauseButton":{"type":"boolean","default":false},"showUnmuteButton":{"type":"boolean","default":false},"showFullscreenButton":{"type":"boolean","default":false}},"textdomain":"wpzoom-slideshow-block","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":"file:./view.js"}');(0,e.registerBlockType)(m.name,{...m,edit:function(e){let{attributes:r,setAttributes:c,clientId:m}=e;const{selectBlock:p}=(0,d.useDispatch)(t.store),{parents:v}=(0,d.useSelect)((e=>{const{getBlockParents:o}=e(t.store);return{parents:o(m)}}),[m]),b=v.length>=2?v[v.length-2]:null,{url:w,videoProvider:g,localVideoUrl:k,localVideoType:h,backgroundImageId:_,backgroundImageUrl:y,backgroundImageAlt:E,backgroundSize:f,dimRatio:z,overlayColor:C,customOverlayColor:N,showPauseButton:B,showUnmuteButton:S,showFullscreenButton:P}=r,V=(0,t.useBlockProps)({className:`has-background-video ${g?`has-background-video-${g}`:""} ${y?"has-background-image":""}`,style:{backgroundColor:C||N,...y&&{backgroundImage:`url(${y})`,backgroundSize:f}}}),I=()=>{c({localVideoUrl:"",localVideoType:"",videoProvider:""})},U=()=>{c({backgroundImageUrl:"",backgroundImageId:void 0,backgroundImageAlt:""})},x="youtube"===g||"vimeo"===g?"external":g,[T,O]=(0,o.useState)(!1),[$,A]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{"youtube"===g&&w&&(O(!1),A(!1))}),[w,g]),(0,o.createElement)(o.Fragment,null,(0,o.createElement)(t.InspectorControls,null,(0,o.createElement)(a.PanelBody,{title:(0,l.__)("Slideshow Settings","wpzoom-slideshow-block")},b&&(0,o.createElement)(a.Button,{onClick:()=>p(b),variant:"secondary",className:"edit-slider-settings",style:{width:"100%",justifyContent:"center",marginBottom:"16px"}},(0,l.__)("Slideshow Settings","wpzoom-slideshow-block"))),(0,o.createElement)(a.PanelBody,{title:(0,l.__)("Video Settings","wpzoom-slideshow-block")},(0,o.createElement)(a.SelectControl,{label:(0,l.__)("Video Source","wpzoom-slideshow-block"),value:x,options:[{label:(0,l.__)("Select Source","wpzoom-slideshow-block"),value:""},{label:(0,l.__)("YouTube/Vimeo","wpzoom-slideshow-block"),value:"external"},{label:(0,l.__)("Self-hosted","wpzoom-slideshow-block"),value:"local"}],onChange:e=>{""===e?c({videoProvider:"",url:"",localVideoUrl:"",localVideoType:""}):"external"===e?w||c({videoProvider:"",localVideoUrl:"",localVideoType:""}):c({videoProvider:e,url:"",localVideoUrl:"",localVideoType:""})}}),("external"===x||""===x)&&(0,o.createElement)("div",{className:"components-base-control video-url-control"},(0,o.createElement)("label",{className:"components-base-control__label",htmlFor:"video-url-input"},(0,l.__)("Video URL","wpzoom-slideshow-block")),(0,o.createElement)("div",{className:"video-url-input-wrapper"},(0,o.createElement)("input",{id:"video-url-input",type:"url",className:"components-text-control__input",value:w||"",onChange:e=>(e=>{const o=(e=>e?e.match(/youtube\.com|youtu\.be/)?"youtube":e.match(/vimeo\.com/)?"vimeo":null:null)(e);o&&c({url:e,videoProvider:o,localVideoUrl:"",localVideoType:""})})(e.target.value),placeholder:(0,l.__)("Enter YouTube or Vimeo video URL","wpzoom-slideshow-block")}),w&&(0,o.createElement)(a.Button,{icon:n,label:(0,l.__)("Clear","wpzoom-slideshow-block"),onClick:()=>{c({url:"",videoProvider:""})},className:"clear-url-button"})),(0,o.createElement)("p",{className:"components-base-control__help"},(0,l.__)("Enter YouTube or Vimeo video URL","wpzoom-slideshow-block"))),"local"===g&&(0,o.createElement)("div",{className:"wp-block-video-cover__local-video-upload"},(0,o.createElement)(t.MediaUploadCheck,null,(0,o.createElement)(t.MediaUpload,{onSelect:e=>{e&&e.url&&c({localVideoUrl:e.url,localVideoType:e.mime_type,url:"",videoProvider:"local"})},allowedTypes:["video"],value:k,render:e=>{let{open:t}=e;return(0,o.createElement)("div",null,k?(0,o.createElement)("div",null,(0,o.createElement)("video",{src:k,style:{maxWidth:"100%"},controls:!0}),(0,o.createElement)("div",{className:"video-controls"},(0,o.createElement)(a.Button,{onClick:t,variant:"secondary"},(0,l.__)("Replace Video","wpzoom-slideshow-block")),(0,o.createElement)(a.Button,{onClick:I,variant:"link",isDestructive:!0},(0,l.__)("Remove Video","wpzoom-slideshow-block")))):(0,o.createElement)(a.Button,{onClick:t,variant:"primary"},(0,l.__)("Upload Video","wpzoom-slideshow-block")))}}))),(0,o.createElement)(a.RangeControl,{label:(0,l.__)("Overlay Opacity","wpzoom-slideshow-block"),value:z,onChange:e=>c({dimRatio:e}),min:0,max:100,step:10}),("local"===g||"youtube"===g||"vimeo"===g)&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(a.ToggleControl,{label:(0,l.__)("Show Pause Button","wpzoom-slideshow-block"),help:(0,l.__)("Add a pause/play button overlay for the video","wpzoom-slideshow-block"),checked:B,onChange:e=>c({showPauseButton:e})}),(0,o.createElement)(a.ToggleControl,{label:(0,l.__)("Show Unmute Button","wpzoom-slideshow-block"),help:(0,l.__)("Add a mute/unmute button overlay for the video","wpzoom-slideshow-block"),checked:S,onChange:e=>c({showUnmuteButton:e})}),"local"===g&&(0,o.createElement)(a.ToggleControl,{label:(0,l.__)("Show Fullscreen Button","wpzoom-slideshow-block"),help:(0,l.__)("Add a fullscreen button overlay for the video","wpzoom-slideshow-block"),checked:P,onChange:e=>c({showFullscreenButton:e})}))),(0,o.createElement)(t.__experimentalPanelColorGradientSettings,{title:(0,l.__)("Overlay Color","wpzoom-slideshow-block"),initialOpen:!1,settings:[{colorValue:C||N,onColorChange:e=>{c({customOverlayColor:e,overlayColor:void 0})},label:(0,l.__)("Color","wpzoom-slideshow-block")}]}),(0,o.createElement)(a.PanelBody,{title:(0,l.__)("Background Settings","wpzoom-slideshow-block")},(0,o.createElement)("div",{className:"wpzoom-background-image-controls"},(0,o.createElement)("p",{className:"components-base-control__label"},(0,l.__)("Background Image","wpzoom-slideshow-block")),(0,o.createElement)("p",{className:"components-base-control__help"},(0,l.__)("Select an image to use as background or fallback when video is not available","wpzoom-slideshow-block")),(0,o.createElement)(t.MediaUploadCheck,null,(0,o.createElement)(t.MediaUpload,{onSelect:e=>{e&&e.url&&c({backgroundImageUrl:e.url,backgroundImageId:e.id,backgroundImageAlt:e.alt||""})},allowedTypes:["image"],value:_,render:e=>{let{open:t}=e;return(0,o.createElement)("div",{className:"background-image-buttons"},y?(0,o.createElement)("div",{className:"background-image-preview"},(0,o.createElement)("img",{src:y,alt:E}),(0,o.createElement)("div",{className:"background-image-controls"},(0,o.createElement)(a.Button,{onClick:t,variant:"secondary"},(0,l.__)("Replace","wpzoom-slideshow-block")),(0,o.createElement)(a.Button,{onClick:U,variant:"link",isDestructive:!0},(0,l.__)("Remove","wpzoom-slideshow-block")))):(0,o.createElement)(a.Button,{onClick:t,variant:"secondary"},(0,l.__)("Select Image","wpzoom-slideshow-block")))}})),y&&(0,o.createElement)(a.SelectControl,{label:(0,l.__)("Background Size","wpzoom-slideshow-block"),value:f,options:[{label:(0,l.__)("Cover","wpzoom-slideshow-block"),value:"cover"},{label:(0,l.__)("Contain","wpzoom-slideshow-block"),value:"contain"},{label:(0,l.__)("Auto","wpzoom-slideshow-block"),value:"auto"}],onChange:e=>c({backgroundSize:e})})))),(0,o.createElement)("div",V,"local"===g&&k?(0,o.createElement)("div",{className:"wp-block-video-cover__video-background"},(0,o.createElement)("video",{src:k,autoPlay:!0,muted:!0,loop:!0,playsInline:!0})):g&&w&&(0,o.createElement)("div",{className:"wp-block-video-cover__video-background"},(0,o.createElement)("div",{className:"wp-block-video-cover__thumbnail "+($?"is-loaded":""),style:{backgroundImage:`url(${s(w)})`}}),(0,o.createElement)("iframe",{src:i(w,g),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:$?"is-loaded":"",onLoad:()=>{setTimeout((()=>{A(!0)}),1e3)}})),y&&!g&&(0,o.createElement)("div",{className:"wp-block-video-cover__background-image"},(0,o.createElement)("img",{src:y,alt:E})),(0,o.createElement)("div",{className:"wp-block-video-cover__overlay",style:{opacity:z/100,backgroundColor:C||N}}),(0,o.createElement)("div",{className:"wp-block-video-cover__content"},(0,o.createElement)(t.InnerBlocks,{allowedBlocks:u,templateLock:!1,template:[["core/heading",{textAlign:"center",content:"Add Your Heading Here",level:2,style:{color:{text:"#ffffff"}}}],["core/buttons",{layout:{type:"flex",justifyContent:"center"}},[["core/button",{text:"Click Here",backgroundColor:"vivid-cyan-blue"}]]]]}))))},save:function(e){let{attributes:a}=e;const{url:r,videoProvider:n,localVideoUrl:c,backgroundImageUrl:d,backgroundImageAlt:u,backgroundSize:m,dimRatio:p,overlayColor:v,customOverlayColor:b,showPauseButton:w,showUnmuteButton:g,showFullscreenButton:k}=a,h=t.useBlockProps.save({className:`has-background-video ${n?`has-background-video-${n}`:""} ${d?"has-background-image":""}`,style:{backgroundColor:v||b,...d&&{backgroundImage:`url(${d})`,backgroundSize:m}}});return(0,o.createElement)("div",h,"local"===n&&c?(0,o.createElement)("div",{className:"wp-block-video-cover__video-background"},(0,o.createElement)("video",{src:c,autoPlay:!0,muted:!0,loop:!0,playsInline:!0})):("youtube"===n||"vimeo"===n)&&r&&(0,o.createElement)("div",{className:"wp-block-video-cover__video-background"},"youtube"===n&&(0,o.createElement)("div",{className:"wp-block-video-cover__thumbnail","data-thumbnail":s(r),style:{backgroundImage:`url(${s(r)})`}}),(0,o.createElement)("iframe",{src:i(r,n),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,onLoad:e=>{e.target.classList.add("is-loaded");const o=e.target.previousElementSibling;o&&o.classList.add("is-loaded")}})),d&&!n&&(0,o.createElement)("div",{className:"wp-block-video-cover__background-image"},(0,o.createElement)("img",{src:d,alt:u})),(0,o.createElement)("div",{className:"wp-block-video-cover__overlay",style:{opacity:p/100,backgroundColor:v||b}}),(0,o.createElement)("div",{className:"wp-block-video-cover__content"},(0,o.createElement)(t.InnerBlocks.Content,null)),"local"===n&&c&&w&&(0,o.createElement)("button",{className:"wpzoom-video-cover__pause-button","aria-label":(0,l.__)("Pause/Play video","wpzoom-slideshow-block")},(0,o.createElement)("span",{className:"dashicons dashicons-controls-pause"})),"local"===n&&c&&g&&(0,o.createElement)("button",{className:"wpzoom-video-cover__unmute-button","aria-label":(0,l.__)("Unmute/Mute video","wpzoom-slideshow-block")},(0,o.createElement)("span",{className:"dashicons dashicons-controls-volumeoff"})),"local"===n&&c&&k&&(0,o.createElement)("button",{className:"wpzoom-video-cover__fullscreen-button","aria-label":(0,l.__)("Enter fullscreen","wpzoom-slideshow-block")},(0,o.createElement)("span",{className:"dashicons dashicons-fullscreen-alt"})),"youtube"===n&&r&&w&&(0,o.createElement)("button",{className:"wpzoom-video-cover__pause-button","aria-label":(0,l.__)("Pause/Play video","wpzoom-slideshow-block")},(0,o.createElement)("span",{className:"dashicons dashicons-controls-pause"})),"youtube"===n&&r&&g&&(0,o.createElement)("button",{className:"wpzoom-video-cover__unmute-button","aria-label":(0,l.__)("Unmute/Mute video","wpzoom-slideshow-block")},(0,o.createElement)("span",{className:"dashicons dashicons-controls-volumeoff"})),"vimeo"===n&&r&&w&&(0,o.createElement)("button",{className:"wpzoom-video-cover__pause-button","aria-label":(0,l.__)("Pause/Play video","wpzoom-slideshow-block")},(0,o.createElement)("span",{className:"dashicons dashicons-controls-pause"})),"vimeo"===n&&r&&g&&(0,o.createElement)("button",{className:"wpzoom-video-cover__unmute-button","aria-label":(0,l.__)("Unmute/Mute video","wpzoom-slideshow-block")},(0,o.createElement)("span",{className:"dashicons dashicons-controls-volumeoff"})))}})}},l={};function t(e){var a=l[e];if(void 0!==a)return a.exports;var r=l[e]={exports:{}};return o[e](r,r.exports,t),r.exports}t.m=o,e=[],t.O=(o,l,a,r)=>{if(!l){var n=1/0;for(d=0;d<e.length;d++){for(var[l,a,r]=e[d],c=!0,s=0;s<l.length;s++)(!1&r||n>=r)&&Object.keys(t.O).every((e=>t.O[e](l[s])))?l.splice(s--,1):(c=!1,r<n&&(n=r));if(c){e.splice(d--,1);var i=a();void 0!==i&&(o=i)}}return o}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[l,a,r]},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={759:0,52:0};t.O.j=o=>0===e[o];var o=(o,l)=>{var a,r,[n,c,s]=l,i=0;if(n.some((o=>0!==e[o]))){for(a in c)t.o(c,a)&&(t.m[a]=c[a]);if(s)var d=s(t)}for(o&&o(l);i<n.length;i++)r=n[i],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(d)},l=globalThis.webpackChunkwpzoom_video_popup_block=globalThis.webpackChunkwpzoom_video_popup_block||[];l.forEach(o.bind(null,0)),l.push=o.bind(null,l.push.bind(l))})();var a=t.O(void 0,[52],(()=>t(3564)));a=t.O(a)})();
//# sourceMappingURL=index.js.map